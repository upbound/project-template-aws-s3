# code: language=yaml
# yaml-language-server: $schema=../../.up/json/models/test.schema.json

{{- $expectedXR := `
- apiVersion: platform.example.com/v1alpha1
  kind: XStorageBucket
  metadata:
    name: example
  spec:
    parameters:
      acl: public-read
      region: us-west-1
      versioning: true
`}}

{{- $expectedBucketBefore := `
- apiVersion: s3.aws.upbound.io/v1beta1
  kind: Bucket
  metadata:
    annotations:
      crossplane.io/composition-resource-name: bucket
  spec:
    forProvider:
      region: us-west-1
`}}

{{- $observedBucket := `
- apiVersion: s3.aws.upbound.io/v1beta1
  kind: Bucket
  metadata:
    annotations:
      crossplane.io/composition-resource-name: bucket
      crossplane.io/external-name: example-bucket
    name: example-bucket
  spec:
    forProvider:
      region: us-west-1
`}}

{{- $expectedBucketAfter := `
- apiVersion: s3.aws.upbound.io/v1beta1
  kind: Bucket
  metadata:
    annotations:
      crossplane.io/composition-resource-name: bucket
    name: example-bucket
  spec:
    forProvider:
      region: us-west-1
`}}

{{- $expectedACL := `
- apiVersion: s3.aws.upbound.io/v1beta1
  kind: BucketACL
  metadata:
    annotations:
      crossplane.io/composition-resource-name: acl
  spec:
    forProvider:
      acl: public-read
      bucket: example-bucket
      region: us-west-1
`}}

{{- $expectedBOC := `
- apiVersion: s3.aws.upbound.io/v1beta1
  kind: BucketOwnershipControls
  metadata:
    annotations:
      crossplane.io/composition-resource-name: boc
  spec:
    forProvider:
      bucket: example-bucket
      region: us-west-1
      rule:
        - objectOwnership: BucketOwnerPreferred
`}}

{{- $expectedSSE := `
- apiVersion: s3.aws.upbound.io/v1beta1
  kind: BucketServerSideEncryptionConfiguration
  metadata:
    annotations:
      crossplane.io/composition-resource-name: sse
  spec:
    forProvider:
      bucket: example-bucket
      region: us-west-1
      rule:
        - applyServerSideEncryptionByDefault:
          - sseAlgorithm: AES256
          bucketKeyEnabled: true
`}}

{{- $expectedPAB := `
- apiVersion: s3.aws.upbound.io/v1beta1
  kind: BucketPublicAccessBlock
  metadata:
    annotations:
      crossplane.io/composition-resource-name: pab
  spec:
    forProvider:
      blockPublicAcls: false
      blockPublicPolicy: false
      bucket: example-bucket
      ignorePublicAcls: false
      region: us-west-1
      restrictPublicBuckets: false
`}}

{{- $expectedVersioning := `
- apiVersion: s3.aws.upbound.io/v1beta1
  kind: BucketVersioning
  metadata:
    annotations:
      crossplane.io/composition-resource-name: versioning
  spec:
    forProvider:
      bucket: example-bucket
      region: us-west-1
      versioningConfiguration:
        - status: Enabled
`}}
